<!-- Step 3: Strategy & Content -->
<div class="form-step <%= 'hidden' unless @step == '3' %>" 
     data-campaign-form-target="step" 
     data-step="3"
     role="tabpanel"
     aria-labelledby="step-3-title">
  
  <div class="bg-white rounded-lg border p-8">
    <div class="mb-8">
      <h2 id="step-3-title" class="text-xl font-bold text-gray-900 mb-2">Strategy & Content</h2>
      <p class="text-gray-600">Define your messaging approach and select marketing channels.</p>
    </div>

    <div class="space-y-8">
      <!-- Messaging Framework -->
      <div>
        <h3 class="text-lg font-medium text-gray-900 mb-4">Messaging Framework</h3>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Messaging Tone -->
          <div>
            <%= form.label :messaging_tone, "Messaging Tone", 
                           class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.select :messaging_tone, 
                            options_for_select([
                              ['Select messaging tone...', ''],
                              ['Professional & Authoritative', 'professional'],
                              ['Friendly & Conversational', 'friendly'],
                              ['Inspirational & Motivational', 'inspirational'],
                              ['Educational & Informative', 'educational'],
                              ['Playful & Creative', 'playful'],
                              ['Urgent & Direct', 'urgent'],
                              ['Empathetic & Supportive', 'empathetic'],
                              ['Premium & Exclusive', 'premium']
                            ], @campaign.messaging_tone),
                            {},
                            { class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",
                              "data-auto-save-target": "input" } %>
          </div>

          <!-- Brand Guidelines -->
          <div>
            <%= form.label :brand_guidelines, "Brand Guidelines Reference", 
                           class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.text_field :brand_guidelines, 
                                class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",
                                placeholder: "Link to brand guidelines or reference document",
                                "data-auto-save-target": "input" %>
          </div>

          <!-- Key Messages -->
          <div class="lg:col-span-2">
            <%= form.label :key_messages, "Key Messages", 
                           class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.text_area :key_messages, 
                               rows: 4,
                               class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",
                               placeholder: "List the main messages you want to communicate (one per line)...",
                               "data-auto-save-target": "input" %>
            <p class="text-sm text-gray-500 mt-1">
              Enter each key message on a separate line. These should align with your campaign goals and resonate with your target persona.
            </p>
          </div>
        </div>
      </div>

      <!-- Marketing Channels -->
      <div>
        <h3 class="text-lg font-medium text-gray-900 mb-4">Marketing Channels</h3>
        <div class="space-y-4">
          <p class="text-sm text-gray-600">Select the channels you plan to use for this campaign:</p>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <% [
              { id: 'email', name: 'Email Marketing', icon: 'M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z' },
              { id: 'social_media', name: 'Social Media', icon: 'M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84' },
              { id: 'content_marketing', name: 'Content Marketing', icon: 'M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z' },
              { id: 'paid_advertising', name: 'Paid Advertising', icon: 'M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z' },
              { id: 'seo', name: 'SEO/Organic Search', icon: 'M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z' },
              { id: 'events', name: 'Events/Webinars', icon: 'M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z' },
              { id: 'partnerships', name: 'Partnerships', icon: 'M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z' },
              { id: 'direct_mail', name: 'Direct Mail', icon: 'M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z' },
              { id: 'pr', name: 'Public Relations', icon: 'M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z' }
            ].each do |channel| %>
              <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
                <%= check_box_tag "campaign[channels][]", channel[:id], false, 
                                  class: "rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3",
                                  "data-auto-save-target": "input" %>
                <div class="flex items-center">
                  <svg class="w-5 h-5 text-gray-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="<%= channel[:icon] %>"/>
                  </svg>
                  <span class="text-sm font-medium text-gray-900"><%= channel[:name] %></span>
                </div>
              </label>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Content Requirements -->
      <div>
        <h3 class="text-lg font-medium text-gray-900 mb-4">Content Requirements</h3>
        <div class="space-y-4">
          <%= form.label :content_requirements, "Content Assets Needed", 
                         class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_area :content_requirements, 
                             rows: 4,
                             class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",
                             placeholder: "List the content assets you'll need (e.g., blog posts, images, videos, ad copy, landing pages)...",
                             "data-auto-save-target": "input" %>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Step 4: Timeline & Budget -->
<div class="form-step <%= 'hidden' unless @step == '4' %>" 
     data-campaign-form-target="step" 
     data-step="4"
     role="tabpanel"
     aria-labelledby="step-4-title">
  
  <div class="bg-white rounded-lg border p-8">
    <div class="mb-8">
      <h2 id="step-4-title" class="text-xl font-bold text-gray-900 mb-2">Timeline & Budget</h2>
      <p class="text-gray-600">Set your campaign schedule and allocate resources.</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Timeline Section -->
      <div class="space-y-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Campaign Timeline</h3>
        
        <!-- Start Date -->
        <div>
          <%= form.label :start_date, "Campaign Start Date", 
                         class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.date_field :start_date, 
                              class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",
                              "data-form-validation-target": "field",
                              "data-validation-rules": "required",
                              "data-auto-save-target": "input" %>
          <div class="text-sm text-red-600 mt-1 hidden" data-form-validation-target="error"></div>
        </div>

        <!-- End Date -->
        <div>
          <%= form.label :end_date, "Campaign End Date", 
                         class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.date_field :end_date, 
                              class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",
                              "data-auto-save-target": "input" %>
          <p class="text-sm text-gray-500 mt-1">
            Leave blank for ongoing campaigns
          </p>
        </div>

        <!-- Key Milestones -->
        <div>
          <%= form.label :key_milestones, "Key Milestones", 
                         class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_area :key_milestones, 
                             rows: 4,
                             class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",
                             placeholder: "List important dates and deliverables...",
                             "data-auto-save-target": "input" %>
        </div>

        <!-- Pre-launch Checklist -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
          <h4 class="text-sm font-medium text-blue-900 mb-3">Pre-launch Preparation Time</h4>
          <div class="space-y-2 text-sm text-blue-800">
            <div class="flex items-center">
              <input type="checkbox" class="rounded border-blue-300 text-blue-600 mr-2">
              <span>Content creation and approval (1-2 weeks)</span>
            </div>
            <div class="flex items-center">
              <input type="checkbox" class="rounded border-blue-300 text-blue-600 mr-2">
              <span>Design and creative assets (1 week)</span>
            </div>
            <div class="flex items-center">
              <input type="checkbox" class="rounded border-blue-300 text-blue-600 mr-2">
              <span>Technical setup and testing (3-5 days)</span>
            </div>
            <div class="flex items-center">
              <input type="checkbox" class="rounded border-blue-300 text-blue-600 mr-2">
              <span>Team training and preparation (2-3 days)</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Budget Section -->
      <div class="space-y-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Campaign Budget</h3>
        
        <!-- Total Budget -->
        <div>
          <%= form.label :budget, "Total Campaign Budget", 
                         class: "block text-sm font-medium text-gray-700 mb-2" %>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <span class="text-gray-500 sm:text-sm">$</span>
            </div>
            <%= form.number_field :budget, 
                                  class: "w-full pl-7 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",
                                  placeholder: "0.00",
                                  step: 0.01,
                                  min: 0,
                                  "data-auto-save-target": "input" %>
          </div>
        </div>

        <!-- Budget Allocation -->
        <div>
          <h4 class="text-sm font-medium text-gray-700 mb-3">Budget Allocation (Optional)</h4>
          <div class="space-y-3">
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-xs font-medium text-gray-600 mb-1">Paid Advertising</label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <span class="text-gray-500 text-sm">$</span>
                  </div>
                  <input type="number" 
                         name="campaign[budget_allocation][advertising]" 
                         class="w-full pl-7 pr-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                         placeholder="0.00"
                         step="0.01"
                         min="0"
                         data-auto-save-target="input">
                </div>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-600 mb-1">Content Creation</label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <span class="text-gray-500 text-sm">$</span>
                  </div>
                  <input type="number" 
                         name="campaign[budget_allocation][content]" 
                         class="w-full pl-7 pr-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                         placeholder="0.00"
                         step="0.01"
                         min="0"
                         data-auto-save-target="input">
                </div>
              </div>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label class="block text-xs font-medium text-gray-600 mb-1">Tools & Software</label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <span class="text-gray-500 text-sm">$</span>
                  </div>
                  <input type="number" 
                         name="campaign[budget_allocation][tools]" 
                         class="w-full pl-7 pr-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                         placeholder="0.00"
                         step="0.01"
                         min="0"
                         data-auto-save-target="input">
                </div>
              </div>
              <div>
                <label class="block text-xs font-medium text-gray-600 mb-1">Events/Activities</label>
                <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <span class="text-gray-500 text-sm">$</span>
                  </div>
                  <input type="number" 
                         name="campaign[budget_allocation][events]" 
                         class="w-full pl-7 pr-2 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                         placeholder="0.00"
                         step="0.01"
                         min="0"
                         data-auto-save-target="input">
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ROI Expectations -->
        <div>
          <%= form.label :roi_expectations, "ROI Expectations", 
                         class: "block text-sm font-medium text-gray-700 mb-2" %>
          <%= form.text_area :roi_expectations, 
                             rows: 3,
                             class: "w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",
                             placeholder: "Describe your expected return on investment...",
                             "data-auto-save-target": "input" %>
        </div>

        <!-- Budget Approval -->
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
          <h4 class="text-sm font-medium text-yellow-900 mb-2">Budget Approval</h4>
          <div class="space-y-2">
            <label class="flex items-center text-sm text-yellow-800">
              <input type="checkbox" 
                     name="campaign[budget_approved]" 
                     class="rounded border-yellow-300 text-yellow-600 mr-2"
                     data-auto-save-target="input">
              <span>Budget has been approved by stakeholders</span>
            </label>
            <div>
              <label class="block text-xs font-medium text-yellow-700 mb-1">Approved by:</label>
              <input type="text" 
                     name="campaign[budget_approver]" 
                     class="w-full px-3 py-2 text-sm border border-yellow-300 rounded focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"
                     placeholder="Name and title"
                     data-auto-save-target="input">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Step 5: Review & Launch -->
<div class="form-step <%= 'hidden' unless @step == '5' %>" 
     data-campaign-form-target="step" 
     data-step="5"
     role="tabpanel"
     aria-labelledby="step-5-title">
  
  <div class="bg-white rounded-lg border p-8">
    <div class="mb-8">
      <h2 id="step-5-title" class="text-xl font-bold text-gray-900 mb-2">Review & Launch</h2>
      <p class="text-gray-600">Review your campaign settings and prepare for launch.</p>
    </div>

    <!-- Campaign Summary -->
    <div class="space-y-8">
      <div class="bg-gray-50 rounded-lg p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Campaign Summary</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-campaign-form-target="summary">
          <!-- Summary will be populated by JavaScript -->
        </div>
      </div>

      <!-- Pre-launch Checklist -->
      <div>
        <h3 class="text-lg font-medium text-gray-900 mb-4">Pre-launch Checklist</h3>
        <div class="bg-white border rounded-lg divide-y">
          <% [
            { id: 'content_approved', text: 'All content has been created and approved', critical: true },
            { id: 'assets_ready', text: 'Creative assets are finalized and uploaded', critical: true },
            { id: 'tracking_setup', text: 'Analytics and tracking are properly configured', critical: true },
            { id: 'team_briefed', text: 'Team members have been briefed on their roles', critical: false },
            { id: 'tools_configured', text: 'Marketing tools and platforms are set up', critical: true },
            { id: 'compliance_checked', text: 'Campaign complies with relevant regulations', critical: true },
            { id: 'backup_plan', text: 'Contingency plans are in place', critical: false },
            { id: 'stakeholder_approval', text: 'Final approval received from stakeholders', critical: true }
          ].each do |item| %>
            <div class="p-4 flex items-start">
              <div class="flex-shrink-0">
                <input type="checkbox" 
                       name="campaign[checklist][<%= item[:id] %>]" 
                       class="rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-1"
                       data-critical="<%= item[:critical] %>"
                       data-campaign-form-target="checklistItem">
              </div>
              <div class="ml-3 flex-1">
                <label class="text-sm font-medium text-gray-900">
                  <%= item[:text] %>
                  <% if item[:critical] %>
                    <span class="text-red-600 text-xs ml-1">(Required)</span>
                  <% end %>
                </label>
              </div>
            </div>
          <% end %>
        </div>
      </div>

      <!-- Launch Options -->
      <div>
        <h3 class="text-lg font-medium text-gray-900 mb-4">Launch Options</h3>
        <div class="space-y-4">
          <div class="flex items-center space-x-4">
            <label class="flex items-center">
              <input type="radio" 
                     name="campaign[launch_option]" 
                     value="immediate" 
                     class="text-blue-600 focus:ring-blue-500 border-gray-300"
                     checked
                     data-auto-save-target="input">
              <span class="ml-2 text-sm font-medium text-gray-900">Launch immediately after creation</span>
            </label>
          </div>
          <div class="flex items-center space-x-4">
            <label class="flex items-center">
              <input type="radio" 
                     name="campaign[launch_option]" 
                     value="scheduled" 
                     class="text-blue-600 focus:ring-blue-500 border-gray-300"
                     data-auto-save-target="input">
              <span class="ml-2 text-sm font-medium text-gray-900">Schedule for later launch</span>
            </label>
          </div>
          <div class="flex items-center space-x-4">
            <label class="flex items-center">
              <input type="radio" 
                     name="campaign[launch_option]" 
                     value="draft" 
                     class="text-blue-600 focus:ring-blue-500 border-gray-300"
                     data-auto-save-target="input">
              <span class="ml-2 text-sm font-medium text-gray-900">Save as draft for manual launch</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Notifications -->
      <div>
        <h3 class="text-lg font-medium text-gray-900 mb-4">Notifications</h3>
        <div class="space-y-3">
          <label class="flex items-center">
            <input type="checkbox" 
                   name="campaign[notifications][team_launch]" 
                   class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                   checked
                   data-auto-save-target="input">
            <span class="ml-2 text-sm text-gray-700">Notify team members when campaign launches</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" 
                   name="campaign[notifications][daily_reports]" 
                   class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                   data-auto-save-target="input">
            <span class="ml-2 text-sm text-gray-700">Send daily performance reports</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" 
                   name="campaign[notifications][milestone_alerts]" 
                   class="rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                   checked
                   data-auto-save-target="input">
            <span class="ml-2 text-sm text-gray-700">Alert on milestone achievements</span>
          </label>
        </div>
      </div>

      <!-- Terms and Conditions -->
      <div class="bg-gray-50 border rounded-lg p-4">
        <label class="flex items-start">
          <input type="checkbox" 
                 name="campaign[terms_accepted]" 
                 class="rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-1"
                 required
                 data-form-validation-target="field"
                 data-validation-rules="required">
          <span class="ml-2 text-sm text-gray-700">
            I confirm that this campaign complies with all applicable laws, regulations, and company policies. 
            I understand that I am responsible for monitoring campaign performance and making necessary adjustments.
          </span>
        </label>
        <div class="text-sm text-red-600 mt-1 hidden" data-form-validation-target="error"></div>
      </div>
    </div>
  </div>
</div>