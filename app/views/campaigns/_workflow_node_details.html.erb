<div class="workflow-node-details">
  <% case node_id %>
  <% when 'draft' %>
    <div class="space-y-4">
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Draft Status</h6>
        <p class="text-sm text-gray-600">
          Campaign is being prepared and configured. All settings can be modified before activation.
        </p>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Requirements</h6>
        <ul class="text-sm text-gray-600 space-y-1">
          <li class="flex items-center">
            <span class="w-2 h-2 rounded-full <%= campaign.name.present? ? 'bg-green-500' : 'bg-gray-300' %> mr-2"></span>
            Campaign name
          </li>
          <li class="flex items-center">
            <span class="w-2 h-2 rounded-full <%= campaign.description.present? ? 'bg-green-500' : 'bg-gray-300' %> mr-2"></span>
            Campaign description
          </li>
          <li class="flex items-center">
            <span class="w-2 h-2 rounded-full <%= campaign.persona.present? ? 'bg-green-500' : 'bg-gray-300' %> mr-2"></span>
            Target persona
          </li>
          <li class="flex items-center">
            <span class="w-2 h-2 rounded-full <%= campaign.journeys.any? ? 'bg-green-500' : 'bg-gray-300' %> mr-2"></span>
            At least one journey
          </li>
        </ul>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Available Actions</h6>
        <div class="flex items-center space-x-2">
          <%= link_to "Edit Campaign", edit_campaign_path(campaign), class: "btn btn-outline btn-xs" %>
          <% if campaign_ready_for_activation?(campaign) %>
            <%= button_to "Activate", campaign_path(campaign), 
                          method: :patch, 
                          params: { campaign: { status: 'active' } },
                          class: "btn btn-primary btn-xs" %>
          <% end %>
        </div>
      </div>
    </div>
  
  <% when 'active' %>
    <div class="space-y-4">
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Active Status</h6>
        <p class="text-sm text-gray-600">
          Campaign is live and actively running. Monitor performance and make adjustments as needed.
        </p>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Current Metrics</h6>
        <% performance = campaign.performance_summary %>
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <div class="font-medium text-gray-900">Completion Rate</div>
            <div class="text-gray-600"><%= performance[:completion_rate] || 0 %>%</div>
          </div>
          <div>
            <div class="font-medium text-gray-900">Conversion Rate</div>
            <div class="text-gray-600"><%= performance[:conversion_rate] || 0 %>%</div>
          </div>
        </div>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Available Actions</h6>
        <div class="flex items-center space-x-2">
          <%= button_to "Pause", campaign_path(campaign), 
                        method: :patch, 
                        params: { campaign: { status: 'paused' } },
                        class: "btn btn-warning btn-xs" %>
          <%= button_to "Complete", campaign_path(campaign), 
                        method: :patch, 
                        params: { campaign: { status: 'completed' } },
                        class: "btn btn-success btn-xs" %>
        </div>
      </div>
    </div>
  
  <% when 'paused' %>
    <div class="space-y-4">
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Paused Status</h6>
        <p class="text-sm text-gray-600">
          Campaign activities are temporarily stopped. You can resume or complete the campaign.
        </p>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Pause Reason</h6>
        <p class="text-sm text-gray-600">
          <%= campaign.last_status_change_reason || 'No reason provided' %>
        </p>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Available Actions</h6>
        <div class="flex items-center space-x-2">
          <%= button_to "Resume", campaign_path(campaign), 
                        method: :patch, 
                        params: { campaign: { status: 'active' } },
                        class: "btn btn-primary btn-xs" %>
          <%= button_to "Complete", campaign_path(campaign), 
                        method: :patch, 
                        params: { campaign: { status: 'completed' } },
                        class: "btn btn-success btn-xs" %>
        </div>
      </div>
    </div>
  
  <% when 'completed' %>
    <div class="space-y-4">
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Completed Status</h6>
        <p class="text-sm text-gray-600">
          Campaign has finished and achieved its goals. Review final metrics and consider archiving.
        </p>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Final Results</h6>
        <% performance = campaign.performance_summary %>
        <div class="grid grid-cols-2 gap-4 text-sm">
          <div>
            <div class="font-medium text-gray-900">Total Journeys</div>
            <div class="text-gray-600"><%= campaign.journeys.count %></div>
          </div>
          <div>
            <div class="font-medium text-gray-900">Final Completion Rate</div>
            <div class="text-gray-600"><%= performance[:completion_rate] || 0 %>%</div>
          </div>
        </div>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Available Actions</h6>
        <div class="flex items-center space-x-2">
          <%= button_to "Archive", archive_campaign_path(campaign), 
                        method: :patch,
                        class: "btn btn-outline btn-xs" %>
          <%= link_to "Duplicate", duplicate_campaign_path(campaign), 
                      method: :post,
                      class: "btn btn-outline btn-xs" %>
        </div>
      </div>
    </div>
  
  <% when 'archived' %>
    <div class="space-y-4">
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Archived Status</h6>
        <p class="text-sm text-gray-600">
          Campaign is stored for future reference. Historical data is preserved but the campaign is inactive.
        </p>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Archive Information</h6>
        <div class="text-sm">
          <div class="flex justify-between mb-1">
            <span class="text-gray-600">Archived on:</span>
            <span class="text-gray-900"><%= campaign.updated_at.strftime('%m/%d/%Y') %></span>
          </div>
          <div class="flex justify-between">
            <span class="text-gray-600">Duration:</span>
            <span class="text-gray-900"><%= campaign.duration_days || 0 %> days</span>
          </div>
        </div>
      </div>
      
      <div>
        <h6 class="text-sm font-medium text-gray-900 mb-2">Available Actions</h6>
        <div class="flex items-center space-x-2">
          <%= button_to "Restore", campaign_path(campaign), 
                        method: :patch, 
                        params: { campaign: { status: 'draft' } },
                        class: "btn btn-outline btn-xs" %>
          <%= link_to "Duplicate", duplicate_campaign_path(campaign), 
                      method: :post,
                      class: "btn btn-outline btn-xs" %>
        </div>
      </div>
    </div>
  
  <% else %>
    <div class="text-center py-4">
      <p class="text-sm text-gray-500">Node details not available for <%= node_id %></p>
    </div>
  <% end %>
</div>