<%# Help tooltip component %>

<% 
  content = local_assigns.fetch(:content, "Help information")
  position = local_assigns.fetch(:position, "top")
%>

<div class="relative inline-block" data-controller="tooltip">
  <button type="button" 
          data-action="mouseenter->tooltip#show mouseleave->tooltip#hide focus->tooltip#show blur->tooltip#hide"
          class="text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-full p-1 transition-colors"
          aria-label="Help information">
    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
    </svg>
  </button>
  
  <div data-tooltip-target="content"
       class="invisible opacity-0 absolute z-50 px-3 py-2 text-sm font-medium text-white bg-gray-900 rounded-lg shadow-lg transition-opacity duration-200 max-w-xs
              <%= case position
                  when 'top' then '-top-2 left-1/2 transform -translate-x-1/2 -translate-y-full mb-2'
                  when 'bottom' then '-bottom-2 left-1/2 transform -translate-x-1/2 translate-y-full mt-2'
                  when 'left' then 'top-1/2 -left-2 transform -translate-x-full -translate-y-1/2 mr-2'
                  when 'right' then 'top-1/2 -right-2 transform translate-x-full -translate-y-1/2 ml-2'
                  else '-top-2 left-1/2 transform -translate-x-1/2 -translate-y-full mb-2'
                  end %>"
       role="tooltip">
    <%= content %>
    
    <%# Arrow %>
    <div class="absolute 
                <%= case position
                    when 'top' then 'top-full left-1/2 transform -translate-x-1/2'
                    when 'bottom' then 'bottom-full left-1/2 transform -translate-x-1/2 rotate-180'
                    when 'left' then 'left-full top-1/2 transform -translate-y-1/2 rotate-90'
                    when 'right' then 'right-full top-1/2 transform -translate-y-1/2 -rotate-90'
                    else 'top-full left-1/2 transform -translate-x-1/2'
                    end %>">
      <svg class="w-2 h-2 text-gray-900" fill="currentColor" viewBox="0 0 8 8">
        <path d="M4 0L0 4h8L4 0z"/>
      </svg>
    </div>
  </div>
</div>