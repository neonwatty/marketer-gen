<%# =============================================================================
    THEME CUSTOMIZER INTERFACE
    =============================================================================
    Comprehensive theme customization interface with all features demonstrated
    ============================================================================= %>

<div 
  data-controller="theme-customizer color-palette accessibility" 
  data-theme-customizer-theme-value="{}"
  data-accessibility-announce-page-changes-value="true"
  data-accessibility-trap-focus-value="true"
  class="theme-customizer-interface min-h-screen bg-gray-50"
>
  <!-- Skip Links for Accessibility -->
  <div class="skip-links">
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#theme-controls" class="skip-link">Skip to theme controls</a>
    <a href="#preview-area" class="skip-link">Skip to preview</a>
  </div>

  <!-- Theme Customizer Header -->
  <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <h1 class="text-2xl font-bold text-gray-900">Theme Customizer</h1>
          <span class="ml-3 px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
            WCAG 2.1 AA Compliant
          </span>
        </div>
        
        <div class="flex items-center space-x-4">
          <!-- Theme Toggle -->
          <div data-controller="theme" class="flex items-center">
            <button 
              type="button"
              data-theme-target="toggle"
              data-action="click->theme#toggleTheme"
              class="btn btn-ghost btn-sm"
              aria-label="Toggle theme"
            >
              <svg data-theme-target="lightIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
              </svg>
              <svg data-theme-target="darkIcon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
              </svg>
              <svg data-theme-target="systemIcon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
            </button>
          </div>
          
          <!-- Export/Import Actions -->
          <div class="flex items-center space-x-2">
            <button 
              type="button" 
              data-action="click->theme-customizer#exportTheme"
              class="btn btn-outline btn-sm"
            >
              Export Theme
            </button>
            <button 
              type="button" 
              data-action="click->theme-customizer#resetTheme"
              class="btn btn-secondary btn-sm"
            >
              Reset
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      
      <!-- Theme Controls Sidebar -->
      <div id="theme-controls" class="lg:col-span-1" role="complementary" aria-label="Theme customization controls">
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
          
          <!-- Preset Themes -->
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Preset Themes</h2>
            <div data-theme-customizer-target="presetThemes" class="space-y-3">
              <!-- Preset themes will be populated by JavaScript -->
            </div>
          </div>
          
          <!-- Color Customization -->
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Colors</h2>
            
            <div class="space-y-4">
              <div class="form-field">
                <label for="primary-color" class="form-label">Primary Color</label>
                <div class="flex items-center space-x-3">
                  <input 
                    type="color" 
                    id="primary-color" 
                    data-theme-customizer-target="primaryColor"
                    data-color-type="primary"
                    value="#3b82f6"
                    class="w-12 h-12 border border-gray-300 rounded-lg cursor-pointer"
                  >
                  <input 
                    type="text" 
                    value="#3b82f6" 
                    class="input input-sm flex-1 font-mono"
                    readonly
                  >
                </div>
              </div>
              
              <div class="form-field">
                <label for="secondary-color" class="form-label">Secondary Color</label>
                <div class="flex items-center space-x-3">
                  <input 
                    type="color" 
                    id="secondary-color" 
                    data-theme-customizer-target="secondaryColor"
                    data-color-type="secondary"
                    value="#6366f1"
                    class="w-12 h-12 border border-gray-300 rounded-lg cursor-pointer"
                  >
                  <input 
                    type="text" 
                    value="#6366f1" 
                    class="input input-sm flex-1 font-mono"
                    readonly
                  >
                </div>
              </div>
              
              <div class="form-field">
                <label for="accent-color" class="form-label">Accent Color</label>
                <div class="flex items-center space-x-3">
                  <input 
                    type="color" 
                    id="accent-color" 
                    data-theme-customizer-target="accentColor"
                    data-color-type="accent"
                    value="#10b981"
                    class="w-12 h-12 border border-gray-300 rounded-lg cursor-pointer"
                  >
                  <input 
                    type="text" 
                    value="#10b981" 
                    class="input input-sm flex-1 font-mono"
                    readonly
                  >
                </div>
              </div>
            </div>
            
            <!-- Color Suggestions -->
            <div class="mt-6">
              <h3 class="text-sm font-medium text-gray-700 mb-3">Suggested Palettes</h3>
              <div data-theme-customizer-target="colorSuggestions" class="space-y-2">
                <!-- Color suggestions will be populated by JavaScript -->
              </div>
            </div>
            
            <!-- Accessibility Report -->
            <div class="mt-6">
              <div data-color-palette-target="accessibilityReport">
                <!-- Accessibility results will be shown here -->
              </div>
            </div>
          </div>
          
          <!-- Typography -->
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Typography</h2>
            
            <div class="space-y-4">
              <div class="form-field">
                <label for="font-primary" class="form-label">Primary Font</label>
                <select 
                  id="font-primary" 
                  data-theme-customizer-target="fontPrimary"
                  data-font-type="primary"
                  class="select"
                >
                  <option value="">Select a font...</option>
                  <!-- Font options will be populated by JavaScript -->
                </select>
              </div>
              
              <div class="form-field">
                <label for="font-heading" class="form-label">Heading Font</label>
                <select 
                  id="font-heading" 
                  data-theme-customizer-target="fontHeading"
                  data-font-type="heading"
                  class="select"
                >
                  <option value="">Select a font...</option>
                  <!-- Font options will be populated by JavaScript -->
                </select>
              </div>
              
              <div class="form-field">
                <label for="font-display" class="form-label">Display Font</label>
                <select 
                  id="font-display" 
                  data-theme-customizer-target="fontDisplay"
                  data-font-type="display"
                  class="select"
                >
                  <option value="">Select a font...</option>
                  <!-- Font options will be populated by JavaScript -->
                </select>
              </div>
            </div>
            
            <!-- Font Suggestions -->
            <div class="mt-6">
              <h3 class="text-sm font-medium text-gray-700 mb-3">Font Combinations</h3>
              <div data-theme-customizer-target="fontSuggestions" class="space-y-2">
                <!-- Font suggestions will be populated by JavaScript -->
              </div>
            </div>
          </div>
          
          <!-- Branding -->
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Branding</h2>
            
            <div class="space-y-4">
              <div class="form-field">
                <label for="company-name" class="form-label">Company Name</label>
                <input 
                  type="text" 
                  id="company-name" 
                  data-theme-customizer-target="companyName"
                  placeholder="Your Company Name"
                  class="input"
                >
              </div>
              
              <div class="form-field">
                <label for="brand-name" class="form-label">Brand Name</label>
                <input 
                  type="text" 
                  id="brand-name" 
                  data-theme-customizer-target="brandName"
                  placeholder="Your Brand Name"
                  class="input"
                >
              </div>
              
              <div class="form-field">
                <label for="logo-upload" class="form-label">Logo Upload</label>
                <div class="flex items-center space-x-4">
                  <input 
                    type="file" 
                    id="logo-upload" 
                    data-theme-customizer-target="logoUpload"
                    accept="image/*"
                    class="hidden"
                  >
                  <label 
                    for="logo-upload" 
                    class="btn btn-outline btn-sm cursor-pointer"
                  >
                    Choose File
                  </label>
                  <img 
                    data-theme-customizer-target="logoPreview"
                    class="hidden h-12 w-auto rounded border border-gray-200"
                    alt="Logo preview"
                  >
                </div>
                <p class="form-help">Upload a logo file (PNG, JPG, SVG). Max 5MB.</p>
              </div>
            </div>
          </div>
          
          <!-- Layout Options -->
          <div class="p-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-4">Layout</h2>
            
            <div class="space-y-4">
              <div class="form-field">
                <label for="layout-style" class="form-label">Layout Style</label>
                <select 
                  id="layout-style" 
                  data-layout-type="style"
                  class="select"
                >
                  <option value="modern">Modern</option>
                  <option value="classic">Classic</option>
                  <option value="minimal">Minimal</option>
                  <option value="creative">Creative</option>
                </select>
              </div>
              
              <div class="form-field">
                <label for="sidebar-style" class="form-label">Sidebar Style</label>
                <select 
                  id="sidebar-style" 
                  data-layout-type="sidebar"
                  class="select"
                >
                  <option value="expanded">Expanded</option>
                  <option value="collapsed">Collapsed</option>
                  <option value="hidden">Hidden</option>
                </select>
              </div>
              
              <div class="form-field">
                <label for="header-style" class="form-label">Header Style</label>
                <select 
                  id="header-style" 
                  data-layout-type="header"
                  class="select"
                >
                  <option value="fixed">Fixed</option>
                  <option value="static">Static</option>
                  <option value="floating">Floating</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Preview Area -->
      <div id="preview-area" class="lg:col-span-2" role="main" aria-label="Theme preview">
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
          <div class="p-6 border-b border-gray-200">
            <div class="flex justify-between items-center">
              <h2 class="text-lg font-semibold text-gray-900">Live Preview</h2>
              <div class="flex items-center space-x-2">
                <span class="text-sm text-gray-500">Live preview:</span>
                <button 
                  type="button"
                  data-action="click->theme-customizer#toggleLivePreview"
                  class="btn btn-sm btn-outline"
                >
                  Enable
                </button>
              </div>
            </div>
          </div>
          
          <!-- Preview Content -->
          <div 
            data-theme-customizer-target="preview" 
            class="theme-preview p-6"
            style="
              --preview-primary: #3b82f6;
              --preview-secondary: #6366f1;
              --preview-accent: #10b981;
              --preview-font-primary: 'Inter', sans-serif;
              --preview-font-heading: 'Inter', sans-serif;
              --preview-font-display: 'Playfair Display', serif;
            "
          >
            <!-- Dashboard Preview -->
            <div class="dashboard-preview mb-8">
              <div class="flex items-center space-x-4 mb-6">
                <img 
                  src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Crect width='40' height='40' fill='%233b82f6'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-family='Arial' font-size='18' font-weight='bold'%3EL%3C/text%3E%3C/svg%3E"
                  alt="Logo"
                  class="preview-logo w-10 h-10 rounded-lg"
                >
                <div>
                  <h1 class="preview-company-name text-2xl font-bold" style="color: var(--preview-primary); font-family: var(--preview-font-heading);">
                    Your Company
                  </h1>
                  <p class="text-gray-600">Dashboard Preview</p>
                </div>
              </div>
              
              <!-- Sample Cards -->
              <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="card">
                  <div class="card-body">
                    <h3 class="card-title" style="font-family: var(--preview-font-heading);">Total Users</h3>
                    <p class="text-3xl font-bold mt-2" style="color: var(--preview-primary);">12,486</p>
                    <p class="text-sm text-green-600 mt-1">↑ 12% from last month</p>
                  </div>
                </div>
                
                <div class="card">
                  <div class="card-body">
                    <h3 class="card-title" style="font-family: var(--preview-font-heading);">Revenue</h3>
                    <p class="text-3xl font-bold mt-2" style="color: var(--preview-secondary);">$48,392</p>
                    <p class="text-sm text-green-600 mt-1">↑ 8% from last month</p>
                  </div>
                </div>
                
                <div class="card">
                  <div class="card-body">
                    <h3 class="card-title" style="font-family: var(--preview-font-heading);">Campaigns</h3>
                    <p class="text-3xl font-bold mt-2" style="color: var(--preview-accent);">24</p>
                    <p class="text-sm text-blue-600 mt-1">3 active campaigns</p>
                  </div>
                </div>
              </div>
              
              <!-- Sample Typography -->
              <div class="mb-8">
                <h1 class="text-display-lg mb-4" style="font-family: var(--preview-font-display); color: var(--preview-primary);">
                  Display Heading
                </h1>
                <h2 class="text-heading-h2 mb-3" style="font-family: var(--preview-font-heading);">
                  Section Heading
                </h2>
                <p class="text-lg mb-4" style="font-family: var(--preview-font-primary);">
                  This is a sample paragraph that demonstrates how your content will look with the selected fonts and colors. 
                  The typography system ensures consistent spacing and hierarchy throughout your application.
                </p>
                <p class="text-base text-gray-600" style="font-family: var(--preview-font-primary);">
                  Secondary text appears in a lighter color for better visual hierarchy and improved readability.
                </p>
              </div>
              
              <!-- Sample Buttons -->
              <div class="flex flex-wrap gap-3 mb-8">
                <button class="btn btn-primary">Primary Button</button>
                <button class="btn btn-secondary">Secondary Button</button>
                <button class="btn btn-outline">Outline Button</button>
                <button class="btn btn-ghost">Ghost Button</button>
              </div>
              
              <!-- Sample Form -->
              <div class="max-w-md">
                <h3 class="text-lg font-semibold mb-4" style="font-family: var(--preview-font-heading);">
                  Sample Form
                </h3>
                <div class="space-y-4">
                  <div class="form-field">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="input" placeholder="Enter your email">
                  </div>
                  <div class="form-field">
                    <label class="form-label">Message</label>
                    <textarea class="textarea" rows="3" placeholder="Your message here..."></textarea>
                  </div>
                  <button type="submit" class="btn btn-primary">Send Message</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Accessibility Features Demo -->
        <div class="mt-8 bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
          <div class="p-6 border-b border-gray-200">
            <h2 class="text-lg font-semibold text-gray-900">Accessibility Features</h2>
          </div>
          <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h3 class="font-medium text-gray-900 mb-3">WCAG 2.1 AA Compliance</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                  <li class="flex items-center">
                    <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Color contrast ratios 4.5:1 or higher
                  </li>
                  <li class="flex items-center">
                    <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Touch targets 44px minimum
                  </li>
                  <li class="flex items-center">
                    <svg class="w-4 h-4 text-green-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Semantic HTML structure
                  </li>
                </ul>
              </div>
              <div>
                <h3 class="font-medium text-gray-900 mb-3">Accessibility Features</h3>
                <ul class="space-y-2 text-sm text-gray-600">
                  <li class="flex items-center">
                    <svg class="w-4 h-4 text-blue-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Screen reader support
                  </li>
                  <li class="flex items-center">
                    <svg class="w-4 h-4 text-blue-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Keyboard navigation
                  </li>
                  <li class="flex items-center">
                    <svg class="w-4 h-4 text-blue-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Reduced motion support
                  </li>
                </ul>
              </div>
            </div>
            
            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
              <p class="text-sm text-blue-800">
                <strong>Try these keyboard shortcuts:</strong> 
                Alt+1 (Main content), Alt+2 (Navigation), Alt+S (Search), ? (Help)
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Live Region for Screen Reader Announcements -->
  <div 
    data-accessibility-target="liveRegion" 
    aria-live="polite" 
    aria-atomic="true" 
    class="sr-only"
  ></div>
  
  <div 
    data-accessibility-target="announcements" 
    aria-live="assertive" 
    aria-atomic="true" 
    class="sr-only"
  ></div>
</div>

<!-- Theme-aware styles for this page -->
<style>
  .theme-preview {
    transition: all 200ms ease-out;
  }
  
  .theme-preview .card {
    background-color: var(--color-surface-primary);
    border: 1px solid var(--color-border-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
  }
  
  .theme-preview .card:hover {
    box-shadow: var(--shadow-md);
  }
  
  .theme-preview .card-title {
    color: var(--color-text-primary);
    font-weight: var(--weight-semibold);
  }
  
  .theme-preview .btn-primary {
    background-color: var(--preview-primary);
    border-color: var(--preview-primary);
    color: white;
  }
  
  .theme-preview .btn-primary:hover {
    filter: brightness(1.1);
  }
  
  .theme-preview .input,
  .theme-preview .textarea {
    background-color: var(--color-surface-primary);
    border: 1px solid var(--color-border-primary);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
    color: var(--color-text-primary);
    transition: var(--transition-base);
  }
  
  .theme-preview .input:focus,
  .theme-preview .textarea:focus {
    outline: none;
    border-color: var(--preview-primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
  
  .layout-modern {
    --radius-lg: 0.75rem;
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  }
  
  .layout-classic {
    --radius-lg: 0.25rem;
    --shadow-sm: 0 2px 4px 0 rgba(0, 0, 0, 0.1);
  }
  
  .layout-minimal {
    --radius-lg: 0;
    --shadow-sm: none;
  }
  
  .layout-creative {
    --radius-lg: 1.5rem;
    --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }
</style>