<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <style>
      body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
      .header { background-color: #f4f4f4; padding: 20px; text-align: center; }
      .content { padding: 20px; }
      .summary-stats { background-color: #f9f9f9; padding: 15px; margin: 20px 0; border-radius: 5px; }
      .feedback-item { border-left: 4px solid #007bff; padding: 10px; margin: 10px 0; background-color: #f8f9fa; }
      .priority-critical { border-left-color: #dc3545; }
      .priority-high { border-left-color: #ffc107; }
      .priority-medium { border-left-color: #28a745; }
      .priority-low { border-left-color: #17a2b8; }
      .button { background-color: #007bff; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin: 10px 0; }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>ðŸ“Š Feedback Summary</h1>
      <h2><%= @content.title %></h2>
    </div>
    
    <div class="content">
      <p>Hello <%= @recipient.first_name %>,</p>
      
      <p>Here's a summary of all feedback for <strong><%= @content.title %></strong> in the <em><%= @campaign.name %></em> campaign:</p>
      
      <div class="summary-stats">
        <h3>Summary Statistics</h3>
        <ul>
          <li><strong>Total Feedback:</strong> <%= @total_feedback_count %></li>
          <li><strong>Pending:</strong> <%= @pending_count %></li>
          <li><strong>Resolved:</strong> <%= @resolved_count %></li>
        </ul>
      </div>
      
      <% if @feedbacks.any? %>
        <h3>Recent Feedback</h3>
        <% @feedbacks.each do |feedback| %>
          <div class="feedback-item priority-<%= feedback.priority_name.downcase %>">
            <h4>From: <%= feedback.reviewer_user.first_name %> <%= feedback.reviewer_user.last_name %></h4>
            <p><strong>Type:</strong> <%= feedback.feedback_type.humanize %></p>
            <p><strong>Priority:</strong> <%= feedback.priority_name %></p>
            <p><strong>Status:</strong> <%= feedback.status.humanize %></p>
            <p><strong>Feedback:</strong> <%= truncate(feedback.feedback_text, length: 200) %></p>
            <p><strong>Submitted:</strong> <%= feedback.created_at.strftime("%B %d, %Y at %I:%M %p") %></p>
          </div>
        <% end %>
      <% else %>
        <p>No feedback has been submitted for this content yet.</p>
      <% end %>
      
      <a href="<%= @content_url %>" class="button">View Content</a>
      
      <p>
        Best regards,<br>
        The MarketerGen Team
      </p>
    </div>
  </body>
</html>